<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.zerock.mapper.ActorMapper">

	<select id="read" resultType="org.zerock.domain.ActorVO">
		<![CDATA[
		SELECT * FROM actor WHERE act_num = #{act_num}
		]]>
	</select>

	<insert id="insert" keyProperty="act_num"
		useGeneratedKeys="true">
		<![CDATA[
		INSERT INTO actor(act_name, act_birth, act_sex, act_info, act_regdate, mem_nickname, act_img, act_thumb, mov_num) 
		VALUES (#{act_name},#{act_birth},#{act_sex},#{act_info},now(),#{mem_nickname},#{act_img},#{act_thumb},#{mov_num})
		]]>
	</insert>
	
	<update id="update"> 
		<![CDATA[ 
		update actor set act_name=#{act_name}, act_birth=#{act_birth}, act_sex=#{act_sex},
		act_info=#{act_info}, mem_nickname=#{mem_nickname}, act_img=#{act_img}, act_thumb=#{act_thumb} where act_num=#{act_num} 
		]]>
	</update>

	<delete id="delete">
		<![CDATA[
		DELETE FROM actor WHERE act_num=#{act_num}
		]]>
	</delete>

	<select id="movieActorList"
		resultType="org.zerock.domain.ActorVO">
		<![CDATA[
		SELECT * FROM actor WHERE mov_num = #{mov_num}
		]]>
	</select>

	<delete id="deleteActors">
		<![CDATA[
		DELETE FROM actor WHERE mov_num=#{mov_num}
		]]>
	</delete>
	
	<select id="readAttachFileDTO"
		resultType="String">
		<![CDATA[
		SELECT act_thumb FROM actor WHERE act_num = #{act_num}
		]]>
	</select>
	
	<select id="readImgThumb"
		resultType="org.zerock.domain.ImgVO">
		<![CDATA[
		SELECT act_img AS img, act_thumb AS thumb FROM actor WHERE act_num = #{act_num}
		]]>
	</select>
	
	<select id="readActorImgs"
		resultType="org.zerock.domain.ImgVO">
		<![CDATA[
		SELECT act_img AS img, act_thumb AS thumb FROM actor WHERE mov_num = #{mov_num}
		]]>
	</select>

</mapper>